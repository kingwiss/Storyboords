<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Freesound API</title>
</head>
<body>
    <h1>Freesound API Debug</h1>
    <button id="testApi">Test Freesound API</button>
    <div id="output"></div>

    <script>
        document.getElementById('testApi').addEventListener('click', async () => {
            const apiKey = '4cmgOaCLIaCPZljPUkzZnJB6qKWjoxEC1Rtxv5eJ';
            const query = 'ambient music';
            
            try {
                console.log('Making API request...');
                const response = await fetch(`https://freesound.org/apiv2/search/text/?query=${encodeURIComponent(query)}&filter=duration:[30 TO 300] license:"Creative Commons 0"&sort=rating_desc&page_size=5&fields=id,name,username,previews,duration,license&token=${apiKey}`);
                
                console.log('Response status:', response.status);
                const data = await response.json();
                
                console.log('Full API Response:', data);
                
                if (data.results && data.results.length > 0) {
                    console.log('First sound object:', data.results[0]);
                    console.log('Previews object:', data.results[0].previews);
                    
                    if (data.results[0].previews) {
                        console.log('Available preview formats:');
                        Object.keys(data.results[0].previews).forEach(key => {
                            console.log(`  ${key}: ${data.results[0].previews[key]}`);
                        });
                    }
                }
                
                document.getElementById('output').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                
            } catch (error) {
                console.error('API Error:', error);
                document.getElementById('output').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>